var ZSDKUtil=function(d){function f(){}function g(b){var a={};b=b||window.location.href;return b.substr(b.indexOf("?")+1).split("\x26").forEach(function(b){b=b.split("\x3d");a[b[0]]=b[1]}),a.hasOwnProperty("serviceOrigin")&&(a.serviceOrigin=decodeURIComponent(a.serviceOrigin)),a}var c,b=g();return f.prototype.Info=function(){(d.isDevMode()||d.isLogEnabled())&&console.info.apply(console,arguments)},f.prototype.Error=console.error,d.GetQueryParams=g,d.isDevMode=function(){return b&&b.isDevMode},d.isLogEnabled=
function(){return b&&b.isLogEnabled},d.getLogger=function(){return c&&c instanceof f||(c=new f),c},d}(window.ZSDKUtil||{}),ZSDKMessageManager=function(d){function f(a){try{var c="string"==typeof a.data?JSON.parse(a.data):a.data}catch(u){c=a.data}var d=c.type;try{var f;if(!(f="__REGISTER__"===d)){var k=a.source,r=a.origin;f=!(!h.isRegistered()||n!==k||v!==r)||Error("Un-Authorized Message.")}if(f)switch(d){case "__REGISTER__":a=c;n=window.parent;v=w.serviceOrigin;h.dcType=window.location.origin.split(".").pop().toUpperCase();
"COM"===h.dcType&&(h.dcType="US");h.key=a.uniqueID;h.parentWindow=n;h._isRegistered=!0;e({type:"__REGISTER__",widgetOrigin:p(),uniqueID:h.key},h);b(h,"Load",a.data);break;case "__EVENT_RESPONSE__":var m=c.promiseID,q=c.data,t=c.isSuccess;l.hasOwnProperty(m)&&(t?l[m].resolve(q):l[m].reject(q),l[m]=void 0,delete l[m]);break;default:g(a,c)}}catch(u){x.Error("[SDK.MessageHandler] \x3d\x3e ",u.stack)}}function g(a,e){var d=e.widgetID;a=e.eventName;if(h.key===d)var f=b(h,a,e.data);else{var k=h._childWidgets[d];
k&&(f=b(k,a,e.data))}if(e.isPromise){var g={};Promise.all(f).then(function(a){g.response=a;g.widgetID=d;g.sourceWidgetID=h.key;c(e,g)}).catch(function(a){g.response=a;g.widgetID=d;g.sourceWidgetID=h.key;c(e,g)})}}function c(a,b){e({type:"__EVENT_RESPONSE__",widgetOrigin:p(),uniqueID:h.key,eventName:a.eventName,data:b,promiseID:a.promiseID},h)}function b(a,b,c){b=a.eventHandlers[b];var e=[];if(Array.isArray(b))for(var d=0;d<b.length;d++){try{var f=b[d].call(a,c);var g=f instanceof Promise?f.then(function(a){return{isSuccess:!0,
response:a}}).catch(function(a){return{isSuccess:!1,response:a}}):{isSuccess:!0,response:f}}catch(q){g={isSuccess:!1,response:q}}e.push(g)}return e}function e(b,c){var e,d=b.isPromise;if(d&&(e="Promise"+t++,b.promiseID=e),c&&(b.uniqueID=(c.parentWidget||c).key,b.widgetID=c.key),b.time=(new Date).getTime(),r(b),d)return a(e)}function a(a){return new Promise(function(b,c){l[a]={resolve:b,reject:c,time:(new Date).getTime()}})}function k(){r({type:"__DEREGISTER__",uniqueID:h.key})}function r(a){if("object"==
typeof a&&(a.widgetOrigin=encodeURIComponent(p())),!n)throw Error("Parentwindow reference not found.");n.postMessage(a,w.serviceOrigin)}function p(){return window.location.protocol+"//"+window.location.host+window.location.pathname}var h,n,v,x=ZSDKUtil.getLogger(),t=100,l={},w=ZSDKUtil.GetQueryParams();return d.Init=function(a){h=a;window.addEventListener("message",f);window.addEventListener("unload",k)},d.SendEvent=e,d}(window.ZSDKMessageManager||{});
window.ZSDK=function(){function d(c){this.serviceOrigin=c.serviceOrigin||g.serviceOrigin;this.parentWidget=c.parentWidget;this.key=c.key;this._isRegistered=!1;this._childWidgets={};this.eventHandlers=Object.create(null);this.meta}var f,g=ZSDKUtil.GetQueryParams();return d.prototype.on=function(c,b){if("string"!=typeof c)throw Error("Invalid eventname parameter passed.");if("function"!=typeof b)throw Error("Invalid function parameter passed.");var e=this.eventHandlers[c];if(Array.isArray(e)||(this.eventHandlers[c]=
e=[]),e.push(b),"Load"!==c){var a={type:"__EVENT_BIND__",eventName:c,count:e.length};this.parentWidget&&!this.parentWidget.isRegistered()||!this.parentWidget&&!this.isRegistered()?(this.parentWidget||this).on("Load",function(){ZSDKMessageManager.SendEvent(a,this)}):ZSDKMessageManager.SendEvent(a,this)}},d.prototype.off=function(c,b){if("string"!=typeof c)throw Error("Invalid eventname parameter passed.");if("function"!=typeof b)throw Error("Invalid function parameter passed.");c=this.eventHandlers[c];
if(Array.isArray(c)){var e,a=[];for(e=0;e<c.length;e++)c[e]===b&&a.push(e);for(;a.length;)c.splice(a.pop(),1)}},d.prototype._sendEvent=function(c,b,e){return ZSDKMessageManager.SendEvent({type:"__EVENT__",eventName:c,data:b,isPromise:e},this)},d.prototype.emit=function(c,b){ZSDKMessageManager.SendEvent({type:"__EMIT__",eventName:c,data:b},this)},d.prototype.isRegistered=function(){return this._isRegistered},d.prototype.fetch=function(c){return ZSDKMessageManager.SendEvent({eventName:"__HTTP__",isPromise:!0,
options:c},this)},d.prototype.createInstance=function(c){return ZSDKMessageManager.SendEvent({eventName:"__CREATE_INSTANCE__",isPromise:!0,options:c},this)},d.prototype.modal=function(c){return"object"==typeof c&&(c.location="__MODAL__"),this.createInstance(c)},d.prototype.getWidgets=function(){return ZSDKMessageManager.SendEvent({eventName:"__WIDGETS_INFO__",isPromise:!0},this)},d.prototype.getWidgetInstance=function(c){if("string"!=typeof c)throw Error("Invalid WidgetID passed");if(this.parentWidget)return this.parentWidget.getWidgetInstance(c);
var b=this._childWidgets[c];return b||(this._childWidgets[c]=b=new d({key:c,parentWidget:this})),b},d.prototype.getFileObject=function(c){return new File([c.slice(0,c.size)],c.name,{type:c.type})},{Init:function(){return f||(f=new d({serviceOrigin:g.serviceOrigin}),ZSDKMessageManager.Init(f),f)},_getRootInstance:function(){return f}}}();
window.SigmaSDK=function(){function d(a){this._serviceName=a}var f,g=function(){if(!f.isRegistered())throw Error("App not registered.");},c=function(a,b){return f._sendEvent("SIGMA_"+a+"_EVENT",b,!0)},b=function(a,b){return Promise.reject({type:a,message:b})};d.prototype.isRegistered=function(){return f.isRegistered()};d.prototype.context=function(){return g(),f};d.prototype.createWidget=function(a){return g(),f.createInstance(a)};d.prototype.getWidget=function(a){return f.getWidgetInstance(a)};d.prototype.widgetsMeta=
function(){return g(),f.getWidgets()};d.prototype.on=function(a,b){return f.on(a,b)};d.prototype.off=function(a,b){return f.off(a,b)};d.prototype.trigger=function(a,b){return g(),f.emit(a,b)};d.prototype.modal=function(a){return g(),f.modal(a)};d.prototype.fetch=function(a){return g(),f.fetch(a)};d.prototype.get=function(a){if(g(),"string"!=typeof a&&!Array.isArray(a))return b("VALIDATION_ERROR","The get method accepts String or Array of Strings only.");a="string"==typeof a?[a]:a;return 0>=a.length?
b("VALIDATION_ERROR","The get method should not accept empty Array of Strings."):c(this._serviceName,{event_type:"get",properties:a})};d.prototype.getAll=function(a,e){return(g(),"string"!=typeof a)?b("VALIDATION_ERROR","The getAll method accepts module_name as String only."):c(this._serviceName,{event_type:"get_all",module_name:a,options:e})};d.prototype.set=function(a,e){if(g(),"string"!=typeof a&&"object"!=typeof a&&Array.isArray(a))return b("VALIDATION_ERROR","The set method accepts key-value pair or Object of key-value pairs only.");
var d;return("string"==typeof a?(d={},d[a]=e):d=a,0>=d.keys.length)?b("VALIDATION_ERROR","The set method should not accept empty Object."):c(this._serviceName,{event_type:"get_all",properties:d})};d.prototype.remove=function(a){if(g(),"string"!=typeof a&&!Array.isArray(a))return b("VALIDATION_ERROR","The remove method accepts String or Array of Strings only.");a="string"==typeof a?[a]:a;return 0>=a.length?b("VALIDATION_ERROR","The remove method should not accept empty Array of Strings."):c(this._serviceName,
{event_type:"remove",properties:a})};d.prototype.request=function(a){if(g(),!a.url||0>=a.url.trim().length)return b("VALIDATION_ERROR","The parameter url should not be empty");if("string"!=typeof a.url)return b("VALIDATION_ERROR","The parameter url should be type of string");if(a.method||(a.method="GET"),a.params&&"object"!=typeof a.params&&Array.isArray(a.params))return b("VALIDATION_ERROR","The parameter params should be type of object");if(a.headers&&"object"!=typeof a.headers&&Array.isArray(a.headers))return b("VALIDATION_ERROR",
"The parameter headers should be type of object");if(a.files){if("object"!=typeof a.files||Array.isArray(a.files))return b("VALIDATION_ERROR","The parameter files should be type of object");if(5<Object.keys(a.files).length)return b("VALIDATION_ERROR","You can upload a maximum of 5 files at a time.");for(var e=0;e<a.files.length;e++)a.files[e]=f.getFileObject(a.files[e])}return c(this._serviceName,{event_type:"request",options:a})};d.prototype.dispatch=function(a,b){g();return c(this._serviceName,
{event_type:a,options:b})};var e=function(a){return f=window.ZSDK.Init(),"function"==typeof a&&(f.isRegistered()?a.call():f.on("Load",a)),new d(this._serviceName)};return{CRM:{init:e.bind({_serviceName:"CRM"})},DESK:{init:e.bind({_serviceName:"DESK"})},PROJECTS:{init:e.bind({_serviceName:"PROJECTS"})},ORCHESTLY:{init:e.bind({_serviceName:"ORCHESTLY"})},MAIL:{init:e.bind({_serviceName:"MAIL"})},SHOW:{init:e.bind({_serviceName:"SHOW"})},SDP:{init:e.bind({_serviceName:"SDP"})},IOT:{init:e.bind({_serviceName:"IOT"})},
CATALYST:{init:e.bind({_serviceName:"CATALYST"})},FINANCE:{init:e.bind({_serviceName:"FINANCE"})},CONNECT:{init:e.bind({_serviceName:"CONNECT"})},TEAMINBOX:{init:e.bind({_serviceName:"TEAMINBOX"})},SPRINTS:{init:e.bind({_serviceName:"SPRINTS"})},BUGTRACKER:{init:e.bind({_serviceName:"BUGTRACKER"})},CREATOR:{init:e.bind({_serviceName:"CREATOR"})},PEOPLE:{init:e.bind({_serviceName:"PEOPLE"})},COMMERCE:{init:e.bind({_serviceName:"COMMERCE"})},SITES:{init:e.bind({_serviceName:"SITES"})},RECRUIT:{init:e.bind({_serviceName:"RECRUIT"})},
WORKDRIVE:{init:e.bind({_serviceName:"WORKDRIVE"})},WRITER:{init:e.bind({_serviceName:"WRITER"})}}}();var ZCSDK=new function(){var d=!1,f,g=void 0,c={};this._init=function(){if(!d){d=!0;f=new ZSDK;c.appSDK=f;var b;g=new Promise(function(e,a){b=e});f.OnLoad(function(){f.getContext().Event.Trigger("GET_INIT_PARAMS",!0,!0).then(function(e){c.initParams=e;f.getContext().Event.Trigger("GET_QUERY_PARAMS",!0,!0).then(function(a){c.queryParams=a;b()})})})}return g};this._getInitParams=function(){return c.initParams};this._getQueryParams=function(){return c.queryParams};this._getApi=function(){return{API:{RECORDS:new Records(c)},
UTIL:new Util(c)}}},ZOHO=new function(){var d=!1,f=new ZSDK.Init,g=void 0,c=void 0,b={},e;g=new Promise(function(a,b){e=a});f.on("Load",function(){e()});return{CREATOR:{API:new Records(b),UTIL:new Util(b),init:function(){if(!d){var a;c=new Promise(function(b,e){a=b});g.then(function(){d=!0;b.appSDK=f;f._sendEvent("GET_INIT_PARAMS",!0,!0).then(function(e){b.initParams=e;f._sendEvent("GET_QUERY_PARAMS",!0,!0).then(function(e){b.queryParams=e;a()})})}).catch(function(){})}return c}}}};
function Records(d){function f(b){b.scope||(b.scope=d.initParams.scope);b.appName||(b.appName=d.initParams.appName)}function g(b,e){var a=!1,c;for(c in b){var d;if(d=!(e&&e.includes(c))){d=b[c];var f=!1,g;if(!(g=!d||null==d||""===d||"string"==typeof d&&0==d.trim().length)&&(g="object"==typeof d))a:{g=void 0;for(g in d){g=!1;break a}g=!0}g&&(f=!0);d=f}d&&(a=!0)}return a}function c(b){return new Promise(function(d,a){var e=new FileReader;e.readAsDataURL(b);e.onload=function(){d(e.result)};e.onerror=
function(b){a(b)}})}return{addRecord:function(b){if(g(b))return new Promise(function(b,a){a("Improper Configuration..!!")});f(b);return d.appSDK._sendEvent("ADD_RECORD",{formLinkName:b.formName,body:b.data},!0)},updateRecord:function(b){if(g(b))return new Promise(function(a,b){b("Improper Configuration..!!")});var e=b.id.toString().split(",");f(b);return d.appSDK._sendEvent("EDIT_RECORDS",{viewLinkName:b.reportName,body:b.data,listOfRecords:e},!0)},deleteRecord:function(b){if(g(b))return new Promise(function(b,
a){a("Improper Configuration..!!")});f(b);return d.appSDK._sendEvent("DELETE_RECORDS",{viewLinkName:b.reportName,criteria:b.criteria},!0)},getRecordById:function(b){if(g(b))return new Promise(function(b,a){a("Improper Configuration..!!")});f(b);return d.appSDK._sendEvent("GET_RECORD",{viewLinkName:b.reportName,id:b.id},!0)},getAllRecords:function(b){if(g(b,["criteria","page","pageSize"]))return new Promise(function(b,a){a("Improper Configuration..!!")});f(b);return d.appSDK._sendEvent("GET_RECORDS",
{viewLinkName:b.reportName,criteria:b.criteria,page:b.page,pageSize:b.pageSize},!0)},uploadFile:function(b){if(g(b,["file","parentId"]))return new Promise(function(b,a){a("Improper Configuration..!!")});f(b);return b.file?b.file.size&&50<b.file.size/1024/1024?new Promise(function(b,a){a("Improper Configuration..!!")}):new Promise(function(e,a){var f=c(b.file),g="",p=b.file.name;f.then(function(c){g=c;c={viewLinkName:b.reportName,id:b.id,fieldName:b.fieldName,file:g,fileName:p};b.parentId&&(c.parentId=
b.parentId);d.appSDK._sendEvent("UPLOAD_FILE",c,!0).then(function(a){e(a)}).catch(function(b){a(b)})}).catch(function(b){a(b)})}):new Promise(function(b,a){a("Improper Configuration..!!")})}}}
function Util(d){return{setImageData:function(f,g,c){if(g.startsWith("/api/v2/")){var b={};b.src=g;d.appSDK._sendEvent("IMAGE_LOAD",b,!0).then(function(b){f.setAttribute("src",b);c({status:"200",statusText:"success"})}).catch(function(b){if(c)c(b);else{var a=window.console;a.log("Error: Unable to set image data");a.log(b)}})}else f.setAttribute("src",g)},getInitParams:function(){return d.initParams},getQueryParams:function(){return d.queryParams}}};